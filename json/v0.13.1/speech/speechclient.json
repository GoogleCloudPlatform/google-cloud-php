{"id":"speech\/speechclient","type":"","title":"Google\\Cloud\\Speech\\SpeechClient","name":"SpeechClient","description":"<p>Google Cloud Speech client. The Cloud Speech API enables easy integration of\nGoogle speech recognition technologies into developer applications. Send\naudio and receive a text transcription from the Cloud Speech API service.<\/p>\n<p>Find more information at the\n<a href=\"https:\/\/cloud.google.com\/speech\/docs\/\">Google Cloud Speech docs<\/a>.<\/p>\n<p>To enable better detection of encoding\/sample rate values it is recommended\nto install the getID3() library by James Heinrich. Please note that using\nthe library will require files to be temporarily stored on disk. To install\nadd <code>james-heinrich\/getid3<\/code> to your composer require section or run the\nfollowing:<\/p>\n<pre><code class=\"language-sh\">$ composer require james-heinrich\/getid3<\/code><\/pre>","examples":[{"caption":"","code":"use Google\\Cloud\\ServiceBuilder;\n\n$cloud = new ServiceBuilder();\n\n$speech = $cloud->speech();"},{"caption":"<p>SpeechClient can be instantiated directly.<\/p>","code":"use Google\\Cloud\\Speech\\SpeechClient;\n\n$speech = new SpeechClient();"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"\/src\/Speech\/SpeechClient.php#L97","description":"<p>Create a Speech client.<\/p>","examples":[],"resources":[],"params":[{"name":"config","description":"<p>Configuration Options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"config.projectId","description":"<p>The project ID from the Google Developer's Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.authCache","description":"<p>A cache for storing access tokens. <strong>Defaults to<\/strong> a simple in memory implementation.<\/p>","types":["CacheItemPoolInterface"],"optional":null,"nullable":null},{"name":"config.authCacheOptions","description":"<p>Cache configuration options.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.authHttpHandler","description":"<p>A handler used to deliver Psr7 requests specifically for authentication.<\/p>","types":["callable"],"optional":null,"nullable":null},{"name":"config.httpHandler","description":"<p>A handler used to deliver Psr7 requests. Only valid for requests sent over REST.<\/p>","types":["callable"],"optional":null,"nullable":null},{"name":"config.keyFile","description":"<p>The contents of the service account credentials .json file retrieved from the Google Developers Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.keyFilePath","description":"<p>The full path to your service account credentials .json file retrieved from the Google Developers Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.retries","description":"<p>Number of retries for a failed request. <strong>Defaults to<\/strong> <code>3<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"config.scopes","description":"<p>Scopes to be used for the request.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[]},{"id":"recognize","type":"instance","name":"recognize","source":"\/src\/Speech\/SpeechClient.php#L193","description":"<p>Runs a recognize request and returns the results immediately. Ideal when\nworking with audio up to approximately one minute in length.<\/p>\n<p>The Google Cloud Client Library will attempt to infer the sample rate\nand encoding used by the provided audio file for you. This feature is\nrecommended only if you are unsure of what the values may be and is\ncurrently limited to .flac, .amr, and .awb file types. The sample rate\ncannot be inferred from audio provided from a Google Storage object.<\/p>","examples":[{"caption":"","code":"$results = $speech->recognize(\n    fopen(__DIR__  . '\/audio.flac', 'r')\n);\n\nforeach ($results as $result) {\n    echo $result['transcript'];\n}"},{"caption":"<p>Run with speech context, sample rate, and encoding provided<\/p>","code":"$results = $speech->recognize(\n    fopen(__DIR__  . '\/audio.flac', 'r'), [\n    'encoding' => 'FLAC',\n    'sampleRate' => 16000,\n    'speechContext' => [\n        'phrases' => [\n            'The Google Cloud Platform',\n            'Speech API'\n        ]\n    ]\n]);\n\nforeach ($results as $result) {\n    echo $result['transcript'];\n}"}],"resources":[{"title":"SpeechRecognitionAlternative","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1beta1\/speech\/syncrecognize#SpeechRecognitionAlternative"},{"title":"SyncRecognize API documentation","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1beta1\/speech\/syncrecognize"},{"title":"AudioEncoding types","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1beta1\/RecognitionConfig#AudioEncoding"},{"title":"Speech API best practices","link":"https:\/\/cloud.google.com\/speech\/docs\/best-practices"}],"params":[{"name":"audio","description":"<p>The audio to recognize. May\nbe a resource, string of bytes, or Google Cloud Storage object.<\/p>","types":["resource","string","<a data-custom-type=\"storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.sampleRate","description":"<p>Sample rate in Hertz of the provided audio. Valid values are: 8000-48000. 16000 is optimal. For best results, set the sampling rate of the audio source to 16000 Hz. If that's not possible, use the native sample rate of the audio source (instead of re-sampling). <strong>Defaults to<\/strong> <code>8000<\/code> with .amr files and <code>16000<\/code> with .awb files. If the getID3 library has been installed this value will <strong>default to<\/strong> the value read from the file's headers (if they exists).<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.encoding","description":"<p>Encoding of the provided audio. May be one of <code>\"LINEAR16\"<\/code>, <code>\"FLAC\"<\/code>, <code>\"MULAW\"<\/code>, <code>\"AMR\"<\/code>, <code>\"AMR_WB\"<\/code>. <strong>Defaults to<\/strong> <code>\"FLAC\"<\/code> with .flac files, <code>\"AMR\"<\/code> with .amr files and <code>\"AMR_WB\"<\/code> with .awb files.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.maxAlternatives","description":"<p>Maximum number of alternatives to be returned. Valid values are 1-30. <strong>Defaults to<\/strong> <code>1<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.languageCode","description":"<p>The language of the content. BCP-47 (e.g., <code>\"en-US\"<\/code>, <code>\"es-ES\"<\/code>) language codes are accepted. <strong>Defaults to<\/strong> <code>\"en-US\"<\/code> (English).<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.profanityFilter","description":"<p>If set to <code>true<\/code>, the server will attempt to filter out profanities, replacing all but the initial character in each filtered word with asterisks, e.g. \\&quot;f*<strong>\\&quot;. <\/strong>Defaults to** <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.speechContext","description":"<p>Must contain a key <code>phrases<\/code> which is to be an array of strings which provide &quot;hints&quot; to the speech recognizer to favor specific words and phrases in the results. Please see <a href=\"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1beta1\/RecognitionConfig#SpeechContext\">SpeechContext<\/a> for more information.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["array"],"description":"<p>The transcribed results. Each element of the array contains\na <code>transcript<\/code> key which holds the transcribed text. Optionally\na <code>confidence<\/code> key holding the confidence estimate ranging from\n0.0 to 1.0 may be present. <code>confidence<\/code> is typically provided\nonly for the top hypothesis.<\/p>"}]},{"id":"beginRecognizeOperation","type":"instance","name":"beginRecognizeOperation","source":"\/src\/Speech\/SpeechClient.php#L302","description":"<p>Runs a recognize request as an operation. Ideal when working with audio\nlonger than approximately one minute. Requires polling of the returned\noperation in order to fetch results.<\/p>\n<p>The Google Cloud Client Library will attempt to infer the sample rate\nand encoding used by the provided audio file for you. This feature is\nrecommended only if you are unsure of what the values may be and is\ncurrently limited to .flac, .amr, and .awb file types. The sample rate\ncannot be inferred from audio provided from a Google Storage object.<\/p>\n<p>For longer audio, up to approximately 80 minutes, you must use Google\nCloud Storage objects as input. In addition to this restriction, only\nLINEAR16 audio encoding can be used for long audio inputs.<\/p>","examples":[{"caption":"","code":"$operation = $speech->beginRecognizeOperation(\n    fopen(__DIR__  . '\/audio.flac', 'r')\n);\n\n$isComplete = $operation->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $operation->reload();\n    $isComplete = $operation->isComplete();\n}\n\nprint_r($operation->results());"},{"caption":"<p>Run with speech context, sample rate, and encoding provided<\/p>","code":"$operation = $speech->beginRecognizeOperation(\n    fopen(__DIR__  . '\/audio.flac', 'r'), [\n    'encoding' => 'FLAC',\n    'sampleRate' => 16000,\n    'speechContext' => [\n        'phrases' => [\n            'The Google Cloud Platform',\n            'Speech API'\n        ]\n    ]\n]);\n\n$isComplete = $operation->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $operation->reload();\n    $isComplete = $operation->isComplete();\n}\n\nprint_r($operation->results());"}],"resources":[{"title":"Operations","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1beta1\/operations"},{"title":"AsyncRecognize API documentation","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1beta1\/speech\/asyncrecognize"},{"title":"AudioEncoding types","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1beta1\/RecognitionConfig#AudioEncoding"},{"title":"Speech API best practices","link":"https:\/\/cloud.google.com\/speech\/docs\/best-practices"}],"params":[{"name":"audio","description":"<p>The audio to recognize. May\nbe a resource, string of bytes, or Google Cloud Storage object.<\/p>","types":["resource","string","<a data-custom-type=\"storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.sampleRate","description":"<p>Sample rate in Hertz of the provided audio. Valid values are: 8000-48000. 16000 is optimal. For best results, set the sampling rate of the audio source to 16000 Hz. If that's not possible, use the native sample rate of the audio source (instead of re-sampling). <strong>Defaults to<\/strong> <code>8000<\/code> with .amr files and <code>16000<\/code> with .awb files. If the getID3 library has been installed this value will default to the value read from the file's headers (if it exists).<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.encoding","description":"<p>Encoding of the provided audio. May be one of <code>\"LINEAR16\"<\/code>, <code>\"FLAC\"<\/code>, <code>\"MULAW\"<\/code>, <code>\"AMR\"<\/code>, <code>\"AMR_WB\"<\/code>. <strong>Defaults to<\/strong> <code>\"FLAC\"<\/code> with .flac files, <code>\"AMR\"<\/code> with .amr files and <code>\"AMR_WB\"<\/code> with .awb files.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.maxAlternatives","description":"<p>Maximum number of alternatives to be returned. Valid values are 1-30. <strong>Defaults to<\/strong> <code>1<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.languageCode","description":"<p>The language of the content. BCP-47 (e.g., <code>\"en-US\"<\/code>, <code>\"es-ES\"<\/code>) language codes are accepted. <strong>Defaults to<\/strong> <code>\"en\"<\/code> (English).<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.profanityFilter","description":"<p>If set to <code>true<\/code>, the server will attempt to filter out profanities, replacing all but the initial character in each filtered word with asterisks, e.g. \\&quot;f*<strong>\\&quot;. <\/strong>Defaults to** <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.speechContext","description":"<p>Must contain a key <code>phrases<\/code> which is to be an array of strings which provide &quot;hints&quot; to the speech recognizer to favor specific words and phrases in the results. Please see <a href=\"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1beta1\/RecognitionConfig#SpeechContext\">SpeechContext<\/a> for more information.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["<a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>"],"description":""}]},{"id":"operation","type":"instance","name":"operation","source":"\/src\/Speech\/SpeechClient.php#L329","description":"<p>Lazily instantiates an operation. There are no network requests made at\nthis point. To see the operations that can be performed on an operation\nplease see <a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>.<\/p>","examples":[{"caption":"<p>Access an existing operation by its server generated name.<\/p>","code":"$operation = $speech->operation($operationName);"}],"resources":[],"params":[{"name":"name","description":"<p>The name of the operation to request.<\/p>","types":["string"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>"],"description":""}]}]}