{"id":"pubsub\/subscription","type":"","title":"Google\\Cloud\\PubSub\\Subscription","name":"Subscription","description":"<p>A named resource representing the stream of messages from a single, specific\ntopic, to be delivered to the subscribing application.<\/p>","examples":[{"caption":"<p>Create subscription through a topic<\/p>","code":"use Google\\Cloud\\ServiceBuilder;\n\n$cloud = new ServiceBuilder();\n\n$pubsub = $cloud->pubsub();\n\n$topic = $pubsub->topic('my-topic-name');\n\n$subscription = $topic->subscription('my-new-subscription');"},{"caption":"<p>Create subscription through PubSubClient<\/p>","code":"\nuse Google\\Cloud\\PubSub\\PubSubClient;\n\n$pubsub = new PubSubClient([\n    'projectId' => 'my-awesome-project'\n]);\n\n$subscription = $pubsub->subscription(\n    'my-new-subscription',\n    'my-topic-name'\n);"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"\/src\/PubSub\/Subscription.php#L117","description":"<p>Create a Subscription.<\/p>\n<p>The idiomatic way to use this class is through the PubSubClient or Topic,\nbut you can instantiate it directly as well.<\/p>","examples":[],"resources":[],"params":[{"name":"connection","description":"<p>The service connection object<\/p>","types":["<a data-custom-type=\"pubsub\/connection\/connectioninterface\">Google\\Cloud\\PubSub\\Connection\\ConnectionInterface<\/a>"],"optional":false,"nullable":null},{"name":"projectId","description":"<p>The current project<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"name","description":"<p>The subscription name<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"topicName","description":"<p>The topic name the subscription is attached to<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"encode","description":"<p>Whether messages are encrypted or not.<\/p>","types":["bool"],"optional":false,"nullable":null},{"name":"info","description":"<p>Subscription info. Used to pre-populate the object.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[]},{"id":"name","type":"instance","name":"name","source":"\/src\/PubSub\/Subscription.php#L160","description":"<p>Get the subscription name<\/p>","examples":[{"caption":"","code":"echo $subscription->name();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["string"],"description":""}]},{"id":"create","type":"instance","name":"create","source":"\/src\/PubSub\/Subscription.php#L200","description":"<p>Execute a service request creating the subscription.<\/p>\n<p>The suggested way of creating a subscription is by calling through\n<a data-custom-type=\"pubsub\/topic\" data-method=\"subscribe\">Google\\Cloud\\PubSub\\Topic::subscribe()<\/a> or <a data-custom-type=\"pubsub\/topic\" data-method=\"subscription\">Google\\Cloud\\PubSub\\Topic::subscription()<\/a>.<\/p>\n<p>Returns subscription info in the format detailed in the documentation\nfor a <a href=\"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions#Subscription\">subscription<\/a>.<\/p>\n<p><strong>NOTE: Some methods of instantiation of a Subscription do not supply a\ntopic name. The topic name is required to create a subscription.<\/strong><\/p>","examples":[{"caption":"","code":"$topic = $pubsub->topic('my-topic-name');\n\n$subscription = $topic->subscription('my-new-subscription');\n$result = $subscription->create();"}],"resources":[{"title":"Create Subscription","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/create"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.ackDeadlineSeconds","description":"<p>This value is the maximum time after a subscriber receives a message before the subscriber should acknowledge the message. <strong>Defaults to<\/strong> <code>10<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.pushConfig","description":"<p>See <a data-custom-type=\"pubsub\/subscription\" data-method=\"modifyPushConfig\">Google\\Cloud\\PubSub\\Subscription::modifyPushConfig()<\/a> or <a href=\"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions#PushConfig\">PushConfig<\/a> for usage.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["array"],"description":"<p>An array of subscription info<\/p>"}]},{"id":"delete","type":"instance","name":"delete","source":"\/src\/PubSub\/Subscription.php#L231","description":"<p>Delete a subscription<\/p>","examples":[{"caption":"","code":"$subscription->delete();"}],"resources":[{"title":"Delete Subscription","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/delete"}],"params":[{"name":"options","description":"<p>Configuration Options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["void"],"description":""}]},{"id":"exists","type":"instance","name":"exists","source":"\/src\/PubSub\/Subscription.php#L259","description":"<p>Check if a subscription exists.<\/p>\n<p>Service errors will NOT bubble up from this method. It will always return\na boolean value. If you want to check for errors, use\n<a data-custom-type=\"pubsub\/subscription\" data-method=\"info\">Google\\Cloud\\PubSub\\Subscription::info()<\/a>.<\/p>\n<p>If you need to re-check the existence of a subscription that is already\ndownloaded, call <a data-custom-type=\"pubsub\/subscription\" data-method=\"reload\">Google\\Cloud\\PubSub\\Subscription::reload()<\/a> first\nto refresh the cached information.<\/p>","examples":[{"caption":"","code":"if ($subscription->exists()) {\n    \/\/ do stuff\n}"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["bool"],"description":""}]},{"id":"info","type":"instance","name":"info","source":"\/src\/PubSub\/Subscription.php#L286","description":"<p>Get info on a subscription<\/p>\n<p>If the info is already cached on the object, it will return that result.\nTo fetch a fresh result, use <a data-custom-type=\"pubsub\/subscription\" data-method=\"reload\">Google\\Cloud\\PubSub\\Subscription::reload()<\/a>.<\/p>","examples":[{"caption":"","code":"$info = $subscription->info();\necho $info['name']; \/\/ `projects\/my-awesome-project\/subscriptions\/my-new-subscription`"}],"resources":[{"title":"Get Subscription","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/get"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>Subscription data<\/p>"}]},{"id":"reload","type":"instance","name":"reload","source":"\/src\/PubSub\/Subscription.php#L313","description":"<p>Retrieve info on a subscription from the API.<\/p>\n<p>To use the previously cached result (if it exists), use\n@see Subscription::info().<\/p>","examples":[{"caption":"","code":"$subscription->reload();\n$info = $subscription->info();\necho $info['name']; \/\/ `projects\/my-awesome-project\/subscriptions\/my-new-subscription`"}],"resources":[{"title":"Get Subscription","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/get"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>Subscription data<\/p>"}]},{"id":"pull","type":"instance","name":"pull","source":"\/src\/PubSub\/Subscription.php#L345","description":"<p>Retrieve new messages from the topic.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\nforeach ($messages as $message) {\n    echo $message['data'];\n}"}],"resources":[{"title":"Pull Subscriptions","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/pull"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.returnImmediately","description":"<p>If set, the system will respond immediately, even if no messages are available. Otherwise, wait until new messages are available.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.","description":"<p>$maxMessages Limit the amount of messages pulled.<\/p>","types":["int"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["Generator&lt;Message&gt;"],"description":""}]},{"id":"acknowledge","type":"instance","name":"acknowledge","source":"\/src\/PubSub\/Subscription.php#L396","description":"<p>Acknowledge receipt of a message.<\/p>\n<p>Use <a data-custom-type=\"pubsub\/subscription\" data-method=\"acknowledgeBatch\">Google\\Cloud\\PubSub\\Subscription::acknowledgeBatch()<\/a> to\nacknowledge multiple messages at once.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\n$messagesArray = iterator_to_array($messages);\n\n$subscription->acknowledge($messagesArray[0]);"}],"resources":[{"title":"Acknowledge Message","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/acknowledge"}],"params":[{"name":"message","description":"<p>A message object.<\/p>","types":["<a data-custom-type=\"pubsub\/message\">Google\\Cloud\\PubSub\\Message<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["void"],"description":""}]},{"id":"acknowledgeBatch","type":"instance","name":"acknowledgeBatch","source":"\/src\/PubSub\/Subscription.php#L423","description":"<p>Acknowledge receipt of multiple messages at once.<\/p>\n<p>Use <a data-custom-type=\"pubsub\/subscription\" data-method=\"acknowledge\">Google\\Cloud\\PubSub\\Subscription::acknowledge()<\/a> to acknowledge\na single message.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\n$messagesArray = iterator_to_array($messages);\n\n$subscription->acknowledgeBatch($messagesArray);"}],"resources":[{"title":"Acknowledge Message","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/acknowledge"}],"params":[{"name":"messages","description":"<p>An array of messages<\/p>","types":["<a data-custom-type=\"pubsub\/message[]\">Google\\Cloud\\PubSub\\Message[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["void"],"description":""}]},{"id":"modifyAckDeadline","type":"instance","name":"modifyAckDeadline","source":"\/src\/PubSub\/Subscription.php#L468","description":"<p>Set the acknowledge deadline for a single ackId.<\/p>\n<p>Use <a data-custom-type=\"pubsub\/subscription\" data-method=\"modifyAckDeadlineBatch\">Google\\Cloud\\PubSub\\Subscription::modifyAckDeadlineBatch()<\/a> to\nmodify the ack deadline for multiple messages at once.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\n\nforeach ($messages as $message) {\n    $subscription->modifyAckDeadline($message, 90);\n    sleep(80);\n\n    \/\/ Now we'll acknowledge!\n    $subscription->acknowledge($message);\n\n    break;\n}"}],"resources":[{"title":"Modify Ack Deadline","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/modifyAckDeadline"}],"params":[{"name":"message","description":"<p>A message object<\/p>","types":["<a data-custom-type=\"pubsub\/message\">Google\\Cloud\\PubSub\\Message<\/a>"],"optional":false,"nullable":null},{"name":"seconds","description":"<p>The new ack deadline with respect to the time\nthis request was sent to the Pub\/Sub system. Must be &gt;= 0. For\nexample, if the value is 10, the new ack deadline will expire 10\nseconds after the ModifyAckDeadline call was made. Specifying\nzero may immediately make the message available for another pull\nrequest.<\/p>","types":["int"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["void"],"description":""}]},{"id":"modifyAckDeadlineBatch","type":"instance","name":"modifyAckDeadlineBatch","source":"\/src\/PubSub\/Subscription.php#L508","description":"<p>Set the acknowledge deadline for multiple ackIds.<\/p>\n<p>Use <a data-custom-type=\"pubsub\/subscription\" data-method=\"modifyAckDeadline\">Google\\Cloud\\PubSub\\Subscription::modifyAckDeadline()<\/a> to\nmodify the ack deadline for a single message.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\n$messagesArray = iterator_to_array($messages);\n\n\/\/ Set the ack deadline to a minute and a half from now for every message\n$subscription->modifyAckDeadlineBatch($messagesArray, 90);\n\n\/\/ Delay execution, or make a sandwich or something.\nsleep(80);\n\n\/\/ Now we'll acknowledge\n$subscription->acknowledge($messagesArray);"}],"resources":[{"title":"Modify Ack Deadline","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/modifyAckDeadline"}],"params":[{"name":"messages","description":"<p>An array of messages<\/p>","types":["<a data-custom-type=\"pubsub\/message[]\">Google\\Cloud\\PubSub\\Message[]<\/a>"],"optional":false,"nullable":null},{"name":"seconds","description":"<p>The new ack deadline with respect to the time\nthis request was sent to the Pub\/Sub system. Must be &gt;= 0. For\nexample, if the value is 10, the new ack deadline will expire 10\nseconds after the ModifyAckDeadline call was made. Specifying\nzero may immediately make the message available for another pull\nrequest.<\/p>","types":["int"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["void"],"description":""}]},{"id":"modifyPushConfig","type":"instance","name":"modifyPushConfig","source":"\/src\/PubSub\/Subscription.php#L546","description":"<p>Set the push config for the subscription<\/p>","examples":[{"caption":"","code":"$subscription->modifyPushConfig([\n    'pushEndpoint' => 'https:\/\/www.example.com\/foo\/bar'\n]);"}],"resources":[{"title":"Modify Push Config","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/modifyPushConfig"}],"params":[{"name":"pushConfig","description":"<p>Push delivery configuration. See\n<a href=\"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions#PushConfig\">PushConfig<\/a>\nfor more details.<\/p>","types":["array"],"optional":false,"nullable":null},{"name":"pushConfig.pushEndpoint","description":"<p>A URL locating the endpoint to which messages should be pushed. For example, a Webhook endpoint might use &quot;<a href=\"https:\/\/example.com\/push\">https:\/\/example.com\/push<\/a>&quot;.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"pushConfig.attributes","description":"<p>Endpoint configuration attributes.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["void"],"description":""}]},{"id":"iam","type":"instance","name":"iam","source":"\/src\/PubSub\/Subscription.php#L571","description":"<p>Manage the IAM policy for the current Subscription.<\/p>","examples":[{"caption":"","code":"$currentPolicy = $subscription->iam()->policy();"}],"resources":[{"title":"PubSub Access Control Documentation","link":"https:\/\/cloud.google.com\/pubsub\/access_control"},{"title":"Get Subscription IAM Policy","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/getIamPolicy"},{"title":"Set Subscription IAM Policy","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/setIamPolicy"},{"title":"Test Subscription Permissions","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/testIamPermissions"}],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"iam\/iam\">Google\\Cloud\\Iam\\Iam<\/a>"],"description":""}]}]}