{"id":"bigquery\/queryresults","type":"","title":"Google\\Cloud\\BigQuery\\QueryResults","name":"QueryResults","description":"<p>QueryResults represent the result of a BigQuery SQL query. Read more at the\n<a href=\"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/jobs\/query#response\">Query Response API Documentation<\/a>.<\/p>\n<p>This class should be not instantiated directly, but as a result of\ncalling <a data-custom-type=\"bigquery\/bigqueryclient\" data-method=\"runQuery\">Google\\Cloud\\BigQuery\\BigQueryClient::runQuery()<\/a> or\n<a data-custom-type=\"bigquery\/job\" data-method=\"queryResults\">Google\\Cloud\\BigQuery\\Job::queryResults()<\/a>.<\/p>","examples":[],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"src\/BigQuery\/QueryResults.php#L69","description":"","examples":[],"resources":[],"params":[{"name":"connection","description":"<p>Represents a connection to\nBigQuery.<\/p>","types":["<a data-custom-type=\"bigquery\/connection\/connectioninterface\">Google\\Cloud\\BigQuery\\Connection\\ConnectionInterface<\/a>"],"optional":false,"nullable":null},{"name":"jobId","description":"<p>The job's ID.<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"projectId","description":"<p>The project's ID.<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"info","description":"<p>The query result's metadata.<\/p>","types":["array"],"optional":false,"nullable":null},{"name":"reloadOptions","description":"<p>The options to use when reloading query data.<\/p>","types":["array"],"optional":false,"nullable":null},{"name":"mapper","description":"<p>Maps values between PHP and BigQuery.<\/p>","types":["<a data-custom-type=\"bigquery\/valuemapper\">Google\\Cloud\\BigQuery\\ValueMapper<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[]},{"id":"rows","type":"instance","name":"rows","source":"src\/BigQuery\/QueryResults.php#L127","description":"<p>Retrieves the rows associated with the query and merges them together\nwith the table's schema. It is recommended to check the completeness of\nthe query before attempting to access rows.<\/p>\n<p>Refer to the table below for a guide on how BigQuery types are mapped as\nthey come back from the API.<\/p>\n<table>\n<thead>\n<tr>\n<th><strong>PHP Type<\/strong><\/th>\n<th><strong>BigQuery Data Type<\/strong><\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n<td><code>\\DateTimeInterface<\/code><\/td>\n<td><code>DATETIME<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/bytes\">Google\\Cloud\\BigQuery\\Bytes<\/a><\/td>\n<td><code>BYTES<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/date\">Google\\Cloud\\BigQuery\\Date<\/a><\/td>\n<td><code>DATE<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"core\/int64\">Google\\Cloud\\Core\\Int64<\/a><\/td>\n<td><code>INTEGER<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/time\">Google\\Cloud\\BigQuery\\Time<\/a><\/td>\n<td><code>TIME<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/timestamp\">Google\\Cloud\\BigQuery\\Timestamp<\/a><\/td>\n<td><code>TIMESTAMP<\/code><\/td>\n<\/tr>\n<tr>\n<td>Associative Array<\/td>\n<td><code>RECORD<\/code><\/td>\n<\/tr>\n<tr>\n<td>Non-Associative Array<\/td>\n<td><code>RECORD<\/code> (Repeated)<\/td>\n<\/tr>\n<tr>\n<td><code>float<\/code><\/td>\n<td><code>FLOAT<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>int<\/code><\/td>\n<td><code>INTEGER<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>string<\/code><\/td>\n<td><code>STRING<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>bool<\/code><\/td>\n<td><code>BOOLEAN<\/code><\/td>\n<\/tr>\n<\/tbody>\n<\/table>","examples":[{"caption":"","code":"$isComplete = $queryResults->isComplete();\n\nif ($isComplete) {\n    $rows = $queryResults->rows();\n\n    foreach ($rows as $row) {\n        echo $row['name'] . PHP_EOL;\n    }\n}"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[{"type":"\\Google\\Cloud\\Core\\Exception\\GoogleException","description":"Thrown if the query has not yet completed."}],"returns":[{"types":["<a data-custom-type=\"core\/iterator\/itemiterator\">Google\\Cloud\\Core\\Iterator\\ItemIterator<\/a>"],"description":""}]},{"id":"isComplete","type":"instance","name":"isComplete","source":"src\/BigQuery\/QueryResults.php#L185","description":"<p>Checks the query's completeness. Useful in combination with\n<a data-custom-type=\"bigquery\/queryresults\" data-method=\"reload\">Google\\Cloud\\BigQuery\\QueryResults::reload()<\/a> to poll for query status.<\/p>","examples":[{"caption":"","code":"$isComplete = $queryResults->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ small delay between requests\n    $queryResults->reload();\n    $isComplete = $queryResults->isComplete();\n}\n\necho 'Query complete!';"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["bool"],"description":""}]},{"id":"info","type":"instance","name":"info","source":"src\/BigQuery\/QueryResults.php#L204","description":"<p>Retrieves the cached query details.<\/p>","examples":[{"caption":"","code":"$info = $queryResults->info();\necho $info['totalBytesProcessed'];"}],"resources":[{"title":"Jobs getQueryResults API response documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/jobs\/getQueryResults#response"}],"params":[],"exceptions":[],"returns":[{"types":["array"],"description":""}]},{"id":"reload","type":"instance","name":"reload","source":"src\/BigQuery\/QueryResults.php#L241","description":"<p>Triggers a network request to reload the query's details.<\/p>\n<p>Useful when needing to poll an incomplete query\nfor status. Configuration options will be inherited from\n<a data-custom-type=\"bigquery\/job\" data-method=\"queryResults\">Google\\Cloud\\BigQuery\\Job::queryResults()<\/a> or\n<a data-custom-type=\"bigquery\/bigqueryclient\" data-method=\"runQuery\">Google\\Cloud\\BigQuery\\BigQueryClient::runQuery()<\/a>, but they can be\noverridden if needed.<\/p>","examples":[{"caption":"","code":"$queryResults->isComplete(); \/\/ returns false\nsleep(1); \/\/ let's wait for a moment...\n$queryResults->reload(); \/\/ executes a network request\nif ($queryResults->isComplete()) {\n    echo \"Query complete!\";\n}"}],"resources":[{"title":"Jobs getQueryResults API documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/jobs\/getQueryResults"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.maxResults","description":"<p>Maximum number of results to read per page.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.startIndex","description":"<p>Zero-based index of the starting row.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.timeoutMs","description":"<p>How long to wait for the query to complete, in milliseconds. <strong>Defaults to<\/strong> <code>10000<\/code> milliseconds (10 seconds).<\/p>","types":["int"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":""}]},{"id":"identity","type":"instance","name":"identity","source":"src\/BigQuery\/QueryResults.php#L259","description":"<p>Retrieves the query result's identity.<\/p>\n<p>An identity provides a description of a nested resource.<\/p>","examples":[{"caption":"","code":"echo $queryResults->identity()['projectId'];"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["array"],"description":""}]}]}