{"id":"trace\/requesthandler","type":"","title":"Google\\Cloud\\Trace\\RequestHandler","name":"RequestHandler","description":"<p>This class manages the logic for sampling and reporting a trace within a\nsingle request. It is not meant to be used directly -- instead, it should\nbe managed by the RequestTracer as its singleton instance.<\/p>","examples":[],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"src\/Trace\/RequestHandler.php#L87","description":"<p>Create a new RequestHandler.<\/p>","examples":[],"resources":[],"params":[{"name":"reporter","description":"<p>How to report the trace at the end of the request<\/p>","types":["<a data-custom-type=\"trace\/reporter\/reporterinterface\">Google\\Cloud\\Trace\\Reporter\\ReporterInterface<\/a>"],"optional":false,"nullable":null},{"name":"sampler","description":"<p>Which sampler to use for sampling requests<\/p>","types":["<a data-custom-type=\"trace\/sampler\/samplerinterface\">Google\\Cloud\\Trace\\Sampler\\SamplerInterface<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options. See\n<a data-custom-type=\"trace\/tracespan\" data-method=\"__construct\">Google\\Cloud\\Trace\\TraceSpan::__construct()<\/a> for the other available options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.headers","description":"<p>Optional array of headers to use in place of $_SERVER<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]},{"id":"onExit","type":"instance","name":"onExit","source":"src\/Trace\/RequestHandler.php#L124","description":"<p>The function registered as the shutdown function. Cleans up the trace and\nreports using the provided ReporterInterface. Adds additional labels to\nthe root span detected from the response.<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[]},{"id":"tracer","type":"instance","name":"tracer","source":"src\/Trace\/RequestHandler.php#L152","description":"<p>Return the tracer used for this request.<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"trace\/tracer\/tracerinterface\">Google\\Cloud\\Trace\\Tracer\\TracerInterface<\/a>"],"description":""}]},{"id":"inSpan","type":"instance","name":"inSpan","source":"src\/Trace\/RequestHandler.php#L168","description":"<p>Instrument a callable by creating a TraceSpan that manages the startTime\nand endTime. If an exception is thrown while executing the callable, the\nexception will be caught, the span will be closed, and the exception will\nbe re-thrown.<\/p>","examples":[],"resources":[],"params":[{"name":"spanOptions","description":"<p>Options for the span.\n<a data-custom-type=\"trace\/tracespan\" data-method=\"__construct\">Google\\Cloud\\Trace\\TraceSpan::__construct()<\/a><\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"callable","description":"<p>The callable to inSpan.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.callable.php\" target=\"_blank\">callable<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.mixed\" target=\"_blank\">mixed<\/a>"],"description":"<p>Returns whatever the callable returns<\/p>"}]},{"id":"startSpan","type":"instance","name":"startSpan","source":"src\/Trace\/RequestHandler.php#L181","description":"<p>Explicitly start a new TraceSpan. You will need to manage finishing the TraceSpan,\nincluding handling any thrown exceptions.<\/p>","examples":[],"resources":[],"params":[{"name":"spanOptions","description":"<p>Options for the span.\n<a data-custom-type=\"trace\/tracespan\" data-method=\"__construct\">Google\\Cloud\\Trace\\TraceSpan::__construct()<\/a><\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"trace\/tracespan\">Google\\Cloud\\Trace\\TraceSpan<\/a>"],"description":""}]},{"id":"endSpan","type":"instance","name":"endSpan","source":"src\/Trace\/RequestHandler.php#L191","description":"<p>Explicitly finish the current context (TraceSpan).<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"trace\/tracespan\">Google\\Cloud\\Trace\\TraceSpan<\/a>"],"description":""}]},{"id":"context","type":"instance","name":"context","source":"src\/Trace\/RequestHandler.php#L201","description":"<p>Return the current context (TraceSpan)<\/p>","examples":[],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"trace\/tracecontext\">Google\\Cloud\\Trace\\TraceContext<\/a>"],"description":""}]}]}