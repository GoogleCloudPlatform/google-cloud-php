{"id":"core\/iam\/iam","type":"","title":"Google\\Cloud\\Core\\Iam\\Iam","name":"Iam","description":"<p>IAM Manager<\/p>\n<p>This class is not meant to be used directly. It should be accessed\nthrough other objects which support IAM.<\/p>\n<p>Note that examples make use of the PubSub API, and the\n<a data-custom-type=\"cloud-pubsub\/v0.1.0\/pubsub\/topic\">Google\\Cloud\\PubSub\\Topic<\/a> class.<\/p>\n<p>Policies can be created using the <a data-custom-type=\"core\/iam\/policybuilder\">Google\\Cloud\\Core\\Iam\\PolicyBuilder<\/a>\nto help ensure their validity.<\/p>","examples":[{"caption":"<p>IAM policies are obtained via resources which implement IAM. In this example, we'll use PubSub topics to demonstrate how IAM politices are managed.<\/p>","code":"use Google\\Cloud\\PubSub\\PubSubClient;\n\n$pubsub = new PubSubClient();\n$topic = $pubsub->topic('my-new-topic');\n\n$iam = $topic->iam();"}],"resources":[],"methods":[{"id":"policy","type":"instance","name":"policy","source":"Iam\/Iam.php#L89","description":"<p>Get the existing IAM policy for this resource.<\/p>\n<p>If a policy has already been retrieved from the API, it will be returned.\nTo fetch a fresh copy of the policy, use\n<a data-custom-type=\"core\/iam\/iam\" data-method=\"reload\">Google\\Cloud\\Core\\Iam\\Iam::reload()<\/a>.<\/p>","examples":[{"caption":"","code":"$policy = $iam->policy();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>An array of policy data<\/p>"}]},{"id":"setPolicy","type":"instance","name":"setPolicy","source":"Iam\/Iam.php#L116","description":"<p>Set the IAM policy for this resource.<\/p>\n<p>Bindings with invalid roles, or non-existent members will raise a server\nerror.<\/p>","examples":[{"caption":"","code":"$oldPolicy = $iam->policy();\n$oldPolicy['bindings'][0]['members'] = 'user:test@example.com';\n\n$policy = $iam->setPolicy($oldPolicy);"}],"resources":[],"params":[{"name":"policy","description":"<p>A new policy array<\/p>","types":["array"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>An array of policy data<\/p>"}]},{"id":"testPermissions","type":"instance","name":"testPermissions","source":"Iam\/Iam.php#L144","description":"<p>Test if the current user has the given permissions on this resource.<\/p>\n<p>Invalid permissions will raise a BadRequestException.<\/p>\n<p>A list of allowed permissions can be found in the\n<a href=\"https:\/\/cloud.google.com\/pubsub\/access_control#permissions\">access control documentation<\/a>.<\/p>","examples":[{"caption":"","code":"$allowedPermissions = $iam->testPermissions([\n    'pubsub.topics.publish',\n    'pubsub.topics.attachSubscription'\n]);"}],"resources":[],"params":[{"name":"permissions","description":"<p>A list of permissions to test<\/p>","types":["array"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>A subset of $permissions, with only those allowed included.<\/p>"}]},{"id":"reload","type":"instance","name":"reload","source":"Iam\/Iam.php#L163","description":"<p>Refresh the IAM policy for this resource.<\/p>","examples":[{"caption":"","code":"$policy = $iam->reload();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>An array of policy data<\/p>"}]}]}